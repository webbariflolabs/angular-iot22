node(){
  stage('Cloning Git') {
    checkout scm
  }

  stage('Install dependencies') {
    nodejs('nodejs') {
      sh 'npm install'
      echo "Modules installed"
    }
  }
  stage('Build') {
    nodejs('nodejs') {
      sh 'npm run build'
      echo "Build completed"
    }
  }

  stage('package Build') {
    sh "tar -zcvf bundle.tar.gz dist/iot/"
  }

  stage('Artifacts Creation') {
    fingerprint 'bundle.tar.gz'
    archiveArtifacts 'bundle.tar.gz'
    echo "artifacts created"
  }

  stage('stash changes') {
    stash allowEmpty: true, includes: 'bundle.tar.gz', name: 'buildArtifacts'
  }

}

